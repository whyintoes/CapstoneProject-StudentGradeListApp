# DATA PENGGUNA
users = {
    "G001": {"password": "matematika123", "role": "guru", "mapel": "Matematika", "nama": "Bu Ana"},
    "G002": {"password": "ips123", "role": "guru", "mapel": "IPS", "nama": "Bu Suratni"},
    "G003": {"password": "ipa123", "role": "guru", "mapel": "IPA", "nama": "Pak Budi"},
    "G004": {"password": "Bindo123", "role": "guru", "mapel": "Bahasa Indonesia", "nama": "Pak Sastra"},
    "G005": {"password": "Bing123", "role": "guru", "mapel": "Bahasa Inggris", "nama": "Miss Jolie"},
    "W010": {"password": "wali10", "role": "walikelas", "kelas": "10", "nama": "Pak Fajar"},
    "W011": {"password": "wali11", "role": "walikelas", "kelas": "11", "nama": "Bu Mar"},
    "W012": {"password": "wali12", "role": "walikelas", "kelas": "12", "nama": "Pak Shubuh"},
    "K001": {"password": "kepsek123", "role": "kepsek", "nama": "Dr. Indra"}
}

# DATA SISWA (5 mata pelajaran)
students = [
    {'Nama': 'Andi', 'Kelas': '10', 'Matematika': 50, 'IPA': 70, 'IPS': 90, 'Bahasa_Indonesia': 59, 'Bahasa_Inggris': 79},
    {'Nama': 'Ayu', 'Kelas': '12', 'Matematika': 52, 'IPA': 72, 'IPS': 92, 'Bahasa_Indonesia': 61, 'Bahasa_Inggris': 81},
    {'Nama': 'Bayu', 'Kelas': '12', 'Matematika': 56, 'IPA': 76, 'IPS': 96, 'Bahasa_Indonesia': 65, 'Bahasa_Inggris': 85},
    {'Nama': 'Budi', 'Kelas': '10', 'Matematika': 54, 'IPA': 74, 'IPS': 94, 'Bahasa_Indonesia': 63, 'Bahasa_Inggris': 83},
    {'Nama': 'Cika', 'Kelas': '12', 'Matematika': 60, 'IPA': 80, 'IPS': 100, 'Bahasa_Indonesia': 69, 'Bahasa_Inggris': 89},
    {'Nama': 'Citra', 'Kelas': '10', 'Matematika': 58, 'IPA': 78, 'IPS': 98, 'Bahasa_Indonesia': 67, 'Bahasa_Inggris': 87},
    {'Nama': 'Dina', 'Kelas': '10', 'Matematika': 62, 'IPA': 82, 'IPS': 51, 'Bahasa_Indonesia': 71, 'Bahasa_Inggris': 91},
    {'Nama': 'Dony', 'Kelas': '12', 'Matematika': 64, 'IPA': 84, 'IPS': 53, 'Bahasa_Indonesia': 73, 'Bahasa_Inggris': 93},
    {'Nama': 'Eka', 'Kelas': '10', 'Matematika': 66, 'IPA': 86, 'IPS': 55, 'Bahasa_Indonesia': 75, 'Bahasa_Inggris': 95},
    {'Nama': 'Fajar', 'Kelas': '10', 'Matematika': 70, 'IPA': 90, 'IPS': 59, 'Bahasa_Indonesia': 79, 'Bahasa_Inggris': 99},
    {'Nama': 'Gina', 'Kelas': '10', 'Matematika': 74, 'IPA': 94, 'IPS': 63, 'Bahasa_Indonesia': 83, 'Bahasa_Inggris': 52},
    {'Nama': 'Hani', 'Kelas': '10', 'Matematika': 78, 'IPA': 98, 'IPS': 67, 'Bahasa_Indonesia': 87, 'Bahasa_Inggris': 56},
    {'Nama': 'Ivan', 'Kelas': '10', 'Matematika': 82, 'IPA': 51, 'IPS': 71, 'Bahasa_Indonesia': 91, 'Bahasa_Inggris': 60},
    {'Nama': 'Joko', 'Kelas': '10', 'Matematika': 86, 'IPA': 55, 'IPS': 75, 'Bahasa_Indonesia': 95, 'Bahasa_Inggris': 64},
    {'Nama': 'Kiki', 'Kelas': '11', 'Matematika': 90, 'IPA': 59, 'IPS': 79, 'Bahasa_Indonesia': 99, 'Bahasa_Inggris': 68},
    {'Nama': 'Lina', 'Kelas': '11', 'Matematika': 94, 'IPA': 63, 'IPS': 83, 'Bahasa_Indonesia': 52, 'Bahasa_Inggris': 72},
    {'Nama': 'Mario', 'Kelas': '11', 'Matematika': 98, 'IPA': 67, 'IPS': 87, 'Bahasa_Indonesia': 56, 'Bahasa_Inggris': 76},
    {'Nama': 'Nina', 'Kelas': '11', 'Matematika': 51, 'IPA': 71, 'IPS': 91, 'Bahasa_Indonesia': 60, 'Bahasa_Inggris': 80},
    {'Nama': 'Oscar', 'Kelas': '11', 'Matematika': 55, 'IPA': 75, 'IPS': 95, 'Bahasa_Indonesia': 64, 'Bahasa_Inggris': 84},
    {'Nama': 'Putri', 'Kelas': '11', 'Matematika': 59, 'IPA': 79, 'IPS': 99, 'Bahasa_Indonesia': 68, 'Bahasa_Inggris': 88},
    {'Nama': 'Qori', 'Kelas': '11', 'Matematika': 63, 'IPA': 83, 'IPS': 52, 'Bahasa_Indonesia': 72, 'Bahasa_Inggris': 92},
    {'Nama': 'Rudi', 'Kelas': '11', 'Matematika': 67, 'IPA': 87, 'IPS': 56, 'Bahasa_Indonesia': 76, 'Bahasa_Inggris': 96},
    {'Nama': 'Sinta', 'Kelas': '11', 'Matematika': 71, 'IPA': 91, 'IPS': 60, 'Bahasa_Indonesia': 80, 'Bahasa_Inggris': 100},
    {'Nama': 'Tono', 'Kelas': '11', 'Matematika': 75, 'IPA': 95, 'IPS': 64, 'Bahasa_Indonesia': 84, 'Bahasa_Inggris': 53},
    {'Nama': 'Uli', 'Kelas': '12', 'Matematika': 79, 'IPA': 99, 'IPS': 68, 'Bahasa_Indonesia': 88, 'Bahasa_Inggris': 57},
    {'Nama': 'Vera', 'Kelas': '12', 'Matematika': 83, 'IPA': 52, 'IPS': 72, 'Bahasa_Indonesia': 92, 'Bahasa_Inggris': 61},
    {'Nama': 'Wawan', 'Kelas': '12', 'Matematika': 87, 'IPA': 56, 'IPS': 76, 'Bahasa_Indonesia': 96, 'Bahasa_Inggris': 65},
    {'Nama': 'Xena', 'Kelas': '12', 'Matematika': 91, 'IPA': 60, 'IPS': 80, 'Bahasa_Indonesia': 100, 'Bahasa_Inggris': 69},
    {'Nama': 'Ratno', 'Kelas': '12', 'Matematika': 99, 'IPA': 80, 'IPS': 90, 'Bahasa_Indonesia': 90, 'Bahasa_Inggris': 90},
    {'Nama': 'Jagad Raya', 'Kelas': '12', 'Matematika': 100, 'IPA': 95, 'IPS': 90, 'Bahasa_Indonesia': 100, 'Bahasa_Inggris': 90}
]

def determine_status(nilai):
    """Menentukan status kelulusan berdasarkan nilai"""
    return "Lulus" if nilai >= 70 else "Tidak Lulus"

def login():
    print("\n=== LOGIN ===")
    while True:
        nip = input("NIP: ").strip()
        password = input("Password: ").strip()
        
        if nip in users and users[nip]["password"] == password:
            print(f"\nSelamat datang, {users[nip]['nama']}!")
            return users[nip]
        else:
            print("Login gagal. Coba lagi (ketik 0 untuk batal)")
            if nip == "0":
                return None

def main_menu():
    while True:
        print("\n=== APLIKASI NILAI SISWA ===")
        print("1. Tampilkan Semua Siswa")
        print("2. Tampilkan per Kelas")
        print("3. Tambah Data Siswa")
        print("4. Edit Data Siswa")
        print("5. Hapus Data Siswa")
        print("6. Ranking Kelas")
        print("0. Keluar")
        
        choice = input("Pilih menu: ").strip()
        
        if choice == "0":
            print("Terima kasih dan selalu SEMANGAT!.")
            break
        elif choice == "1":
            show_all_students()
        elif choice == "2":
            show_by_class()
        elif choice == "3":
            add_student()
        elif choice == "4":
            edit_student()
        elif choice == "5":
            delete_student()
        elif choice == "6":
            show_ranking()
        else:
            print("Pilihan tidak valid!")

def show_all_students():
    print("\nDaftar Seluruh Siswa:")
    print("="*90)
    print(f"{'Nama':<15} {'Kelas':<6} {'Matematika':<12} {'IPA':<6} {'IPS':<6} {'B. Indonesia':<14} {'B. Inggris':<12}")
    print("-"*90)
    for s in students:
        print(f"{s['Nama']:<15} {s['Kelas']:<6} {s['Matematika']:<12} {s['IPA']:<6} {s['IPS']:<6} {s['Bahasa_Indonesia']:<14} {s['Bahasa_Inggris']:<12}")
    print("="*90)

def show_by_class():
    kelas = input("Masukkan kelas (10/11/12): ").strip()
    print(f"\nDaftar Siswa Kelas {kelas}:")
    print("="*90)
    print(f"{'Nama':<15} {'Matematika':<12} {'IPA':<6} {'IPS':<6} {'B. Indonesia':<14} {'B. Inggris':<12}")
    print("-"*90)
    
    found = False
    for s in students:
        if s['Kelas'] == kelas:
            found = True
            print(f"{s['Nama']:<15} {s['Matematika']:<12} {s['IPA']:<6} {s['IPS']:<6} {s['Bahasa_Indonesia']:<14} {s['Bahasa_Inggris']:<12}")
    
    if not found:
        print(f"Tidak ada siswa di kelas {kelas}")
    print("="*90)

def add_student():
    print("\nTambah Data Siswa Baru:")
    try:
        nama = input("Nama: ").strip()
        kelas = input("Kelas (10/11/12): ").strip()
        mtk = int(input("Nilai Matematika: ").strip())
        ipa = int(input("Nilai IPA: ").strip())
        ips = int(input("Nilai IPS: ").strip())
        bindo = int(input("Nilai Bahasa Indonesia: ").strip())
        bing = int(input("Nilai Bahasa Inggris: ").strip())
        
        students.append({
            'Nama': nama,
            'Kelas': kelas,
            'Matematika': mtk,
            'IPA': ipa,
            'IPS': ips,
            'Bahasa_Indonesia': bindo,
            'Bahasa_Inggris': bing
        })
        print(f"Data siswa {nama} berhasil ditambahkan!")
    except ValueError:
        print("Input nilai harus berupa angka!")

def edit_student():
    nama = input("Nama siswa yang akan diedit: ").strip()
    found = False
    
    for s in students:
        if s['Nama'].lower() == nama.lower():
            found = True
            print(f"\nMengedit data {s['Nama']}:")
            print("Kosongkan jika tidak ingin mengubah")
            
            try:
                mtk = input(f"Matematika ({s['Matematika']}): ").strip()
                ipa = input(f"IPA ({s['IPA']}): ").strip()
                ips = input(f"IPS ({s['IPS']}): ").strip()
                bindo = input(f"Bahasa Indonesia ({s['Bahasa_Indonesia']}): ").strip()
                bing = input(f"Bahasa Inggris ({s['Bahasa_Inggris']}): ").strip()
                
                if mtk: s['Matematika'] = int(mtk)
                if ipa: s['IPA'] = int(ipa)
                if ips: s['IPS'] = int(ips)
                if bindo: s['Bahasa_Indonesia'] = int(bindo)
                if bing: s['Bahasa_Inggris'] = int(bing)
                
                print(f"Data {s['Nama']} berhasil diupdate!")
            except ValueError:
                print("Input nilai harus berupa angka!")
            break
    
    if not found:
        print(f"Siswa dengan nama {nama} tidak ditemukan!")

def delete_student():
    nama = input("Nama siswa yang akan dihapus: ").strip()
    found = False
    
    for i, s in enumerate(students):
        if s['Nama'].lower() == nama.lower():
            found = True
            del students[i]
            print(f"Data siswa {nama} berhasil dihapus!")
            break
    
    if not found:
        print(f"Siswa dengan nama {nama} tidak ditemukan!")

def show_ranking():
    kelas = input("Masukkan kelas (10/11/12): ").strip()
    class_students = [s for s in students if s['Kelas'] == kelas]
    
    if not class_students:
        print(f"Tidak ada siswa di kelas {kelas}")
        return
    
    # Hitung rata-rata
    for s in class_students:
        s['Rata'] = (s['Matematika'] + s['IPA'] + s['IPS'] + s['Bahasa_Indonesia'] + s['Bahasa_Inggris']) / 5
    
    # Urutkan berdasarkan rata-rata
    ranked = sorted(class_students, key=lambda x: x['Rata'], reverse=True)
    
    print(f"\nRanking Kelas {kelas}:")
    print("="*50)
    print(f"{'Peringkat':<10} {'Nama':<20} {'Rata-rata':<10}")
    print("-"*50)
    for i, s in enumerate(ranked[:3], 1):  # Tampilkan 3 terbaik
        print(f"{i:<10} {s['Nama']:<20} {s['Rata']:.2f}")
    print("="*50)

if __name__ == "__main__":
    user = login()
    if user:
        main_menu()